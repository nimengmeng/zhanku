<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="bootstrap.css" >
    <title>Document</title>
    <style>
       .form-horizontal{
           margin-top: 50px;
       }
        .form-group{
            border: 1px solid rgb(153, 153, 153);
        }
        .form-group input {
            border: none;
        }
        .form-horizontal span{
			/* +  某个元素的下一个元素 */
			display: none;
			color: #ddd;
			line-height:30px;
		}
        #btn{
            width: 100%;
            background: #c81623;
            color: #eababc;
        }
        .form-group input.error{
			border-color: red;
		}
		.form-group input.error:focus{
			box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(255,0,0,.6);
		}
		.form-group input.success{
			border-color: green;
		}
    </style>
</head>
<body>
    <div id="container">
    <div class="col-md-6 col-md-offset-3 col-sm-10">
            <form class="form-horizontal">
                    <div class="form-group">
                      <label for="userID" class="col-sm-2 control-label">用 户 名</label>
                      <div class="col-sm-10">
                        <input type="text" class="form-control" id="userID" placeholder="请输入用户名">
                      </div>
                    </div>
                    <span id="userspan">支持中文、英文、数字、“-”、“_”的组合，4-20个字符</span>
                    <div class="form-group">
                            <label for="pw" class="col-sm-2 control-label">设置密码</label>
                            <div class="col-sm-10">
                              <input type="text" class="form-control" id="pw" placeholder="建议使用两种或两种以上字符组合">
                            </div>
                     </div>
                     <span id="pwspan">建议使用字母、数字和符号两种及以上的组合，6-20个字符</span>
                     <div class="form-group">
                            <label for="confirmpw" class="col-sm-2 control-label">确认密码</label>
                            <div class="col-sm-10">
                              <input type="text" class="form-control" id="confirmpw" placeholder="请再次输入密码">
                            </div>
                     </div>
                     <span>请再次输入密码</span>
                     <div class="form-group">
                            <label for="email" class="col-sm-2 control-label">邮箱验证</label>
                            <div class="col-sm-10">
                              <input type="text" class="form-control" id="email" placeholder="请输入邮箱">
                            </div>
                     </div>
                     <span id="emailspan">验证完成后，你可以使用该邮箱登录</span>

                    <div class="form-group">  
                        <button type="submit" id="btn">立即注册</button>
                    </div>
                  </form>      
        </div>
    </div>


    <script>
        //1.需求:中文英文数字，- _ 4 ~ 20位; 

		// var userIdReg = /^[\u4e00-\u9fa5a-z0-9\-_]{4,20}$/i;

		// //2.建议使用英文数字两种以上字符的组合; 6 ~ 20个字符;
		// //数字字母特殊符号;
		// var passReg = /^[a-z0-9\u0021-\u002f]{6,20}$/
		// //特殊符号范围 /u0021 - /u002f
		// //1.判断 数字;
		// //2.判断 字母;
		// //3.判断 符号;
		// // alert(passReg.test("!!!!!!!!!!!!"))
		// //3.再次输入密码;
		//  // == 2;
		// //4.邮箱;
		// var emaiReg = /\w{6,20}@[a-z0-9]{2,6}\.[a-z]{2,6}/;
		// //根据 输入框之中的字符串，去进行匹配; 匹配结果影响 span 显示和隐藏;


        var necessaryItemObject = {
            userId:{
                el:$("userID"),
                reg:/^[\u4e00-\u9fa5a-z0-9\-_]{4,20}$/i,
                hasVaild:false
            },
            password:{
                el:$("pw"),
                reg:/^[a-z0-9\u0021-\u002f]{6,20}$/i,
                hasVaild:false
            },
            email:{
                el:$("email"),
                reg:/\w{6,20}@[a-z0-9]{2,6}\.[a-z]{2,6}/,
                hasVaild:false
            }

        }

        function $(el){
            return document.getElementById(el);
        }
        
        //验证用户名
        var userEle = necessaryItemObject.userId.el;
        var userReg = necessaryItemObject.userId.reg;
        var oUspan = $("userspan");
        userEle.onfocus = function (){
            oUspan.style.display = "block";
        }
        userEle.onblur = function (){
            var string = this.value;
            addOnlystate(this,userReg.test(string));
        }
        
        
        //验证密码
        var pwEle = necessaryItemObject.password.el;
        var pwReg = necessaryItemObject.password.reg;
        
        var oPspan = $("pwspan");
       
        pwEle.onblur = function (){
            var string = this.value;
            addOnlystate(this,pwReg.test(string));
           // pwdStrongValid(this,string);
        }
         pwEle.onfocus = function (){
            //var string = this.value;
            oPspan.style.display = "block";
           // pwdStrongValid(this,string);
        }

         //验证邮箱
        var emailEle = necessaryItemObject.email.el;
        var emailReg = necessaryItemObject.email.reg;

        var oEspan = $("emailspan");
        emailEle.onfocus = function (){
            oEspan.style.display = "block";
        }
        emailEle.onblur = function (){
            var string = this.value;
            addOnlystate(this,emailReg.test(string));
        }



        function addOnlystate(el,bool){
            //确保元素上的成功或者失败状态唯一；
            //先清空
            el.className = el.className.replace(/\ssuccess|\serror/,"");
            if(bool){
                el.parentNode.parentNode.nextElementSibling.style.display = "none";
                el.className += " success";
            }else{
                el.parentNode.parentNode.nextElementSibling.style.display = "block";
                el.className += " error";
                el.parentNode.parentNode.nextElementSibling.innerHTML="格式错误";
            }
        }
        
        function pwdStrongValid (el,str){
            var strong = 0;
            if(/\d/g.test(str)){
                strong++;
            }
            if(/[a-z]/g.test(str)){
                strong++
            }
            if(/[\u0021-\u002f]/g.test(str)){
                strong++
            }

            switch(strong){
                case 1:
                    el.style.color = "red";
                    break;
                case 2:
                    el.style.color = "yellow";
                case 3:
                    el.style.color = "green";
                default:
                    el.style.color = "#fff";
            }
        }


        //验证不合法不让提交
        var oSubmit = $("submit");
        osub.onclick = function(e){
            var evt = e || window.event;
            for(var attr in necessaryItemObject){
                if(!necessaryItemObject[attr].reg.test(necessaryItemObject[attr].el.value)){
                    evt.preventDefault();
                    break;
                }
            }
        }



    </script>
</body>
</html>